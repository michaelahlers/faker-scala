version: '{build}'

#os: Windows Server 2016

image:
  - macOS
  - Ubuntu
  - Visual Studio 2017

platform:
  - x64

stack:
  - jdk 8
  - jdk 11

environment:
  APPVEYOR_SAVE_CACHE_ON_ERROR: true

build_script:
  - java -version
#  - sbt -version
#  - sbt +test:compile

#test_script:
#  - sbt +test

for:

  -
    matrix:
      only:
        - image: macOS
          stack: jdk 8

    environment:
      JAVA_HOME: '$(/usr/libexec/java_home -version 1.8.0)'

    install:
      - /usr/libexec/java_home -version 1.8.0
      - /usr/libexec/java_home -V
      - 'export PATH=$JAVA_HOME/bin:$PATH'
      - 'echo $PATH'
#      - 'brew install sbt'

    # https://get-coursier.io/docs/cache
#    cache:
#      - '$HOME/Library/Caches/Coursier/v1 -> **/dependencies.sbt, project/*'
#      - '$HOME/.ivy2 -> **/dependencies.sbt, project/*'
#      - '$HOME/.sbt -> **/dependencies.sbt, project/*'

  -
    matrix:
      only:
        - image: macOS
          stack: jdk 11

    environment:
      JAVA_HOME: '$(/usr/libexec/java_home -version 11)'

    install:
      - 'export PATH=$JAVA_HOME/bin:$PATH'
      - 'echo $PATH'
#      - 'brew install sbt'

    # https://get-coursier.io/docs/cache
#    cache:
#      - '$HOME/Library/Caches/Coursier/v1 -> **/dependencies.sbt, project/*'
#      - '$HOME/.ivy2 -> **/dependencies.sbt, project/*'
#      - '$HOME/.sbt -> **/dependencies.sbt, project/*'

  -
    matrix:
      only:
        - image: Ubuntu

    # https://scala-sbt.org/1.x/docs/Installing-sbt-on-Linux.html
    install:
#      - 'echo "deb https://repo.scala-sbt.org/scalasbt/debian all main" | sudo tee /etc/apt/sources.list.d/sbt.list'
#      - 'echo "deb https://repo.scala-sbt.org/scalasbt/debian /" | sudo tee /etc/apt/sources.list.d/sbt_old.list'
#      - 'curl -sL "https://keyserver.ubuntu.com/pks/lookup?op=get&search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823" | sudo apt-key add'
#      - 'sudo apt-get update'
#      - 'sudo apt-get install sbt'

    # https://get-coursier.io/docs/cache
#    cache:
#      - '$HOME/.cache/coursier/v1 -> **/dependencies.sbt, project/*'
#      - '$HOME/.ivy2 -> **/dependencies.sbt, project/*'
#      - '$HOME/.sbt -> **/dependencies.sbt, project/*'

  -
    matrix:
      only:
        - image: Visual Studio 2017
          stack: jdk 8

    environment:
      JAVA_HOME: 'C:\Program Files\Java\jdk1.8.0'

    # https://scala-sbt.org/1.x/docs/Installing-sbt-on-Windows.html
    install:
      - 'SET PATH=%JAVA_HOME%\bin;%PATH%'
#      - 'SET PATH=%PROGRAMFILES(X86)%\sbt\bin;%PATH%'
#      - 'choco install sbt'

#    # https://get-coursier.io/docs/cache
#    cache:
#      - '%LOCALAPPDATA%\Coursier\Cache\v1 -> **\dependencies.sbt, project\*'
#      - '%USERPROFILE%\.ivy2 -> **\dependencies.sbt, project\*'
#      - '%USERPROFILE%\.sbt -> **\dependencies.sbt, project\*'

  -
    matrix:
      only:
        - image: Visual Studio 2017
          stack: jdk 11

    environment:
      JAVA_HOME: 'C:\Program Files\Java\jdk11'

    # https://scala-sbt.org/1.x/docs/Installing-sbt-on-Windows.html
    install:
      - 'SET PATH=%JAVA_HOME%\bin;%PATH%'
#      - 'SET PATH=%PROGRAMFILES(X86)%\sbt\bin;%PATH%'
#      - 'choco install sbt'

#    # https://get-coursier.io/docs/cache
#    cache:
#      - '%LOCALAPPDATA%\Coursier\Cache\v1 -> **\dependencies.sbt, project\*'
#      - '%USERPROFILE%\.ivy2 -> **\dependencies.sbt, project\*'
#      - '%USERPROFILE%\.sbt -> **\dependencies.sbt, project\*'

